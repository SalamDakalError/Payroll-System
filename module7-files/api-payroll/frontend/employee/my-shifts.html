<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="../assets/css/style.css" />
  <title>My Shifts</title>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand"><div class="logo">EMP</div><h1>My Shifts</h1></div>
      <div class="nav"><a class="btn secondary" href="dashboard.html">Dashboard</a><a class="btn secondary" href="../shared/logout.php">Logout</a></div>
    </div>

    <div class="card">
      <h3>My Assigned Shifts</h3>
      <table><thead><tr><th>Date</th><th>Start Time</th><th>End Time</th></tr></thead>
      <tbody id="shifts-table"><tr><td colspan="3">Loading...</td></tr></tbody></table>
    </div>
  </div>
  <script src="../assets/js/main.js"></script>
  <script>
    // Load shifts for current employee
    fetch('/Payroll-System/module7-files/api-payroll/auth/check-session.php')
      .then(response => response.json())
      .then(data => {
        if (data.logged_in && data.user.role_id == 3) {
          // Assuming employee_id is in session
          fetch('/Payroll-System/module7-files/api-payroll/shifts/read-by-employee.php?employee_id=' + data.user.employee_id)
            .then(response => response.json())
            .then(data => {
              const tbody = document.getElementById('shifts-table');
              tbody.innerHTML = data.records.map(s => 
                `<tr><td>${s.shift_date}</td><td>${s.start_time}</td><td>${s.end_time}</td></tr>`
              ).join('');
            });
        }
      });
  </script>
</body>
</html>